â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   AUTOPSIE ARCHITECTURE - VPS DEVOPS AGENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“… Date: Mon Nov 24 18:48:33 UTC 2025
ğŸ“ Location: /opt/vps-devops-agent/
ğŸ”– Version: 1.0.0

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“Š STATISTIQUES PROJET
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Backend Routes:        100+ endpoints
Frontend Pages:        17 HTML pages
Database Tables:       30+ tables
Dependencies:          23 npm packages
Database Size:         892 KB
Total Lines of Code:   ~20,000 lines

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ—ï¸ ARCHITECTURE TECHNIQUE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Backend Stack:
  âœ“ Node.js + Express 4.18.2
  âœ“ SQLite3 (better-sqlite3 12.4.6)
  âœ“ JWT Authentication (7 days expiry)
  âœ“ WebSocket (ws 8.18.3)
  âœ“ OpenAI GPT-4 Integration
  âœ“ Docker API (Dockerode 4.0.9)
  âœ“ SSH Terminal (ssh2 1.17.0)

Frontend Stack:
  âœ“ Vanilla JavaScript (ES6+)
  âœ“ TailwindCSS (CDN)
  âœ“ Font Awesome Icons
  âœ“ Chart.js for visualizations
  âœ“ iframe + postMessage architecture

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“ STRUCTURE RÃ‰PERTOIRES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

vps-devops-agent/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ config/          (2 files)
â”‚   â”œâ”€â”€ database/        (3 files)
â”‚   â”œâ”€â”€ middleware/      (6 files)
â”‚   â”œâ”€â”€ routes/          (18 files)
â”‚   â”œâ”€â”€ scripts/         (3 files)
â”‚   â”œâ”€â”€ services/        (16 files)
â”‚   â””â”€â”€ server.js
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ *.html           (17 pages)
â”‚   â”œâ”€â”€ *.js             (6 scripts)
â”‚   â””â”€â”€ manifest.json
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ devops-agent.db  (892 KB)
â”‚   â””â”€â”€ rbac.db          (110 KB)
â””â”€â”€ migrations/          (3 SQL files)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ›£ï¸ ROUTES API (18 MODULES)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

/api/auth            - Authentication (2 endpoints)
/api/agent           - Server management (10 endpoints)
/api/autonomous      - Autonomous agent (10 endpoints)
/api/ai              - AI Agent chat (8 endpoints)
/api/projects        - Project management (6 endpoints)
/api/docker          - Docker management (10+ endpoints)
/api/monitoring      - System monitoring (9 endpoints)
/api/subscription    - Subscription system (7 endpoints)
/api/admin           - Admin panel (10+ endpoints)
/api/cicd            - CI/CD pipelines (8 endpoints)
/api/servers         - Server CRUD (5 endpoints)
/api/templates       - Command templates (8 endpoints)
/api/terminal        - SSH WebSocket (1 endpoint + WS)
/api/capabilities    - Agent capabilities (5 endpoints)
/api/enhancements    - API enhancements (10+ endpoints)
/api/subscription-v2 - Subscription v2 (7 endpoints)
/api/auth-v2         - Auth v2 (3 endpoints)
/api/ai/agent        - AI Chat legacy (1 endpoint)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ—„ï¸ BASE DE DONNÃ‰ES (30+ TABLES)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Core Tables:
  â€¢ users                  - User accounts & auth
  â€¢ servers                - Managed servers
  â€¢ subscription_plans     - Subscription tiers
  â€¢ subscriptions          - Active subscriptions
  â€¢ autonomous_tasks       - Agent autonomous tasks
  â€¢ ai_conversations       - AI chat history
  â€¢ command_history        - Command execution logs
  â€¢ metrics_history        - System metrics
  â€¢ alert_config           - Alert configuration
  â€¢ payment_transactions   - Payment records

Views:
  â€¢ v_active_subscriptions
  â€¢ v_user_stats
  â€¢ v_servers_summary
  â€¢ v_pending_payments

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ¨ PAGES FRONTEND (17 PAGES)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Authentication:
  âœ“ index.html                 - Login page (5 KB)

Main Dashboard:
  âœ“ dashboard.html             - Main dashboard (150 KB)

Feature Pages:
  âœ“ admin-panel.html           - Admin panel (62 KB)
  âœ“ autonomous-agent.html      - Autonomous agent (29 KB)
  âœ“ projects-manager.html      - Project management (32 KB)
  âœ“ subscription-manager.html  - Subscription mgmt (38 KB)
  âœ“ ai-agent-chat.html         - AI chat interface (29 KB)
  âœ“ docker-manager.html        - Docker management (39 KB)
  âœ“ monitoring.html            - System monitoring (41 KB)
  âœ“ monitoring-advanced.html   - Advanced monitoring (20 KB)
  âœ“ terminal-ssh.html          - SSH terminal (21 KB)
  âœ“ agent-devops.html          - DevOps agent (75 KB)
  âœ“ code-analyzer.html         - Code analyzer (20 KB)
  âœ“ enhancements.html          - API enhancements (24 KB)
  âœ“ sandbox-playground.html    - Sandbox testing (16 KB)
  âœ“ cicd.html                  - CI/CD pipelines (3 KB)
  âœ“ test-admin-modals.html     - Modal testing (14 KB)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ” SÃ‰CURITÃ‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Authentication:
  â€¢ JWT tokens (HS256 algorithm)
  â€¢ 7 days expiration
  â€¢ bcrypt password hashing
  â€¢ Bearer token in Authorization header

Authorization:
  â€¢ Role-based access control (RBAC)
  â€¢ Admin vs User permissions
  â€¢ Resource ownership validation

Security Measures:
  â€¢ CORS enabled
  â€¢ Helmet.js security headers
  â€¢ Rate limiting per IP/user
  â€¢ SQL injection protection (prepared statements)
  â€¢ XSS protection (Content-Type headers)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ¤– AGENT AUTONOME
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Capabilities:
  âœ“ Natural language command interpretation (GPT-4)
  âœ“ Multi-step action plan generation
  âœ“ Risk classification (LOW, MODERATE, HIGH, CRITICAL)
  âœ“ Autonomous execution with approval workflow
  âœ“ Complete execution history tracking

Workflow:
  1. User inputs natural language command
  2. GPT-4 analyzes and generates action plan
  3. System classifies risk level
  4. User approves if HIGH/CRITICAL risk
  5. Sequential execution of steps
  6. Results logging and feedback

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“Š MONITORING SYSTÃˆME
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Metrics Collected (every 30s):
  â€¢ CPU usage (%)
  â€¢ RAM usage (MB / Total MB)
  â€¢ Disk usage (GB / Total GB)
  â€¢ Network I/O (Rx/Tx bytes)
  â€¢ System uptime

Alert Channels:
  â€¢ Email (SMTP configurable)
  â€¢ Telegram (Bot + Chat ID)

Alert Thresholds:
  â€¢ CPU: 80%
  â€¢ RAM: 85%
  â€¢ Disk: 90%

Data Retention:
  â€¢ Metrics: 30 days
  â€¢ Alerts: 90 days

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ³ DOCKER INTEGRATION
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Container Management:
  âœ“ List / Create / Start / Stop / Restart
  âœ“ Real-time stats (CPU, RAM, Network)
  âœ“ Log streaming
  âœ“ Container inspection

Image Management:
  âœ“ List images
  âœ“ Pull from registry
  âœ“ Remove images

Docker Compose:
  âœ“ Execute compose commands
  âœ“ Multi-container orchestration

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ’³ SYSTÃˆME ABONNEMENT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Plans:
  [FREE]       0â‚¬/mois   - 3 projects, 10 tasks/day
  [PRO]       29â‚¬/mois   - 20 projects, 100 tasks/day
  [ENTERPRISE] 199â‚¬/mois - Unlimited everything

Payment Methods:
  â€¢ Mobile Money (Vodacom, Airtel, Orange, Africell)
  â€¢ Credit Card (Stripe - coming soon)

Features Tracking:
  â€¢ Usage monitoring per plan
  â€¢ Automatic limit enforcement
  â€¢ Upgrade/downgrade support
  â€¢ Payment transaction history

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸš€ DÃ‰PLOIEMENT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Production Setup:
  â€¢ OS: Linux (Ubuntu/Debian)
  â€¢ Process Manager: PM2
  â€¢ Web Server: Nginx (reverse proxy)
  â€¢ SSL: Let's Encrypt (certbot)
  â€¢ Domain: devops.aenews.net
  â€¢ Backend Port: 4000
  â€¢ Backend PID: 838872

PM2 Process:
  Name: vps-devops-agent
  Status: Online
  Restarts: 76
  Uptime: ~1 hour

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… CORRECTIONS RÃ‰CENTES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Token JWT Ã©tendu: 24h â†’ 7 jours âœ…
2. Table autonomous_tasks crÃ©Ã©e dans bonne DB âœ…
3. Workspace /opt/agent-projects crÃ©Ã© âœ…
4. Routes /status et /tasks ajoutÃ©es âœ…
5. Backend redÃ©marrÃ© avec nouvelles routes âœ…

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ¯ PROCHAINES Ã‰TAPES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ImmÃ©diat:
  â–¡ User doit se dÃ©connecter/reconnecter (nouveau token)
  â–¡ Tester 3 nouvelles pages (autonomous, projects, subscription)
  â–¡ VÃ©rifier toutes les fonctionnalitÃ©s

Court Terme:
  â–¡ Tests unitaires routes critiques
  â–¡ AmÃ©lioration gestion erreurs frontend
  â–¡ Documentation API complÃ¨te

Moyen Terme:
  â–¡ Analytics dashboard utilisateurs
  â–¡ 2FA (Two-Factor Authentication)
  â–¡ Notifications email avancÃ©es
  â–¡ Extension agent autonome

Long Terme:
  â–¡ Internationalisation (i18n)
  â–¡ Marketplace plugins
  â–¡ IntÃ©grations GitHub/GitLab/AWS
  â–¡ Mode multi-tenant
  â–¡ Version SaaS publique

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FIN DE L'AUTOPSIE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
